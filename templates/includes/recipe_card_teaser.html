{% load static %}

{% block extra_css %}
    <link href="{% static 'css/recipes/recipe_card_teaser.css' %}" rel="stylesheet">
{% endblock %}

<div class="recipe-teaser">
    <div>
        <!-- изображение остаётся без изменений -->
        {% if recipe.image_url %}
            {% if recipe.image_url.url %}
                <img src="{{ recipe.image_url.url }}" alt="{{ recipe.title }}" loading="lazy">
            {% else %}
                <img src="{{ recipe.image_url }}" alt="{{ recipe.title }}" loading="lazy">
            {% endif %}
        {% else %}
            <img src="{% static 'images/recipe-default.jpg' %}" alt="recipe image" loading="lazy">
        {% endif %}

        <!-- Бейдж сложности -->
        <span>{{ recipe.get_difficulty_display }}</span>

        <!-- Время приготовления -->
        <div><span>{{ recipe.cooking_time }} minutes</span></div>
    </div>

    <div class="recipe-teaser-content">
        <h3><a href="">{{ recipe.title|truncatechars:40 }}</a></h3>

        <div class="recipe-teaser-meta">
            <div><i></i> <span>{{ recipe.author.username }}</span></div>
            <div><span>{{ recipe.created_at|date:"d.m.Y" }}</span></div>
        </div>

        <p class="recipe-teaser-description">{{ recipe.description|striptags|truncatechars:120 }}</p>

        <div class="recipe-teaser-categories">
            {% for category in recipe.categories.all|slice:":3" %}
                <a href="{% url 'category_detail' category.slug %}">{{ category.name }}</a>
            {% endfor %}
            {% if recipe.categories.count > 3 %}
                <span>+{{ recipe.categories.count|add:"-3" }}</span>
            {% endif %}
        </div>

        <div class="recipe-teaser-link">
            <a href="">View recipe</a>
        </div>
    </div>
</div>